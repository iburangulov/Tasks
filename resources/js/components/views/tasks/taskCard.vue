<template>
    <div class="col m6">
        <div class="card blue-grey darken-1">
            <div v-if="loading" class="task-loading-wrapper">
                <div class="progress">
                    <div class="indeterminate"></div>
                </div>
            </div>
            <div class="card-content white-text">
                <span class="card-title">{{ task.title }}</span>
                <p>{{ task.description }}</p>
            </div>
            <div class="card-action">
                <div class="fixed-action-btn btn-task-control" :id="'btn-task-control' + this._uid" v-show="!loading">
                    <a class="btn-floating btn-large red">
                        <i class="large material-icons">mode_edit</i>
                    </a>
                    <ul>
                        <li><a class="btn-floating green"><i class="material-icons">visibility</i></a></li>
                        <li><a class="btn-floating yellow darken-1"><i class="material-icons">edit</i></a></li>
                        <li><a class="btn-floating red"><i class="material-icons">delete</i></a></li>
                        <li><a class="btn-floating blue"><i class="material-icons">turned_in_not</i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
import uiButton from "../../gui/uiButton";

export default {
    name: "taskCard",
    props: {
        task: {
            type: Object,
            required: true,
        },
        loading: {
            type: Boolean,
            default: false,
        }
    },
    mounted() {
        M.FloatingActionButton.init(document.getElementById('btn-task-control' + this._uid), {
            direction: 'left'
        });
    },
    components: {
        uiButton,
    },
}
</script>

<style scoped lang="sass">
.task-loading-wrapper
    background-color: white
    z-index: 100
    width: 100%
    height: 100%
    position: absolute
    display: flex
    align-items: center

.card-content
    p
        word-break: break-all

.card-action
    padding-top: 80px

    .btn-task-control
        position: absolute

</style>
